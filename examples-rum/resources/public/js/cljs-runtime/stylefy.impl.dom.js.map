{"version":3,"sources":["stylefy/impl/dom.cljs"],"mappings":"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","names":["stylefy.impl.dom/dom","cljs.core.atom","stylefy.impl.dom/stylefy-node-id","stylefy.impl.dom/stylefy-constant-node-id","stylefy.impl.dom/stylefy-base-node","stylefy.impl.dom/stylefy-instance-id","stylefy$impl$dom$Dom$init_cache$dyn","x__4422__auto__","m__4423__auto__","stylefy.impl.dom/init-cache","goog/typeOf","m__4420__auto__","cljs.core/missing-protocol","stylefy$impl$dom$Dom$init_multi_instance$dyn","stylefy.impl.dom/init-multi-instance","stylefy$impl$dom$Dom$save_style$dyn","stylefy.impl.dom/save-style","stylefy$impl$dom$Dom$add_class$dyn","stylefy.impl.dom/add-class","stylefy$impl$dom$Dom$add_tag$dyn","stylefy.impl.dom/add-tag","stylefy$impl$dom$Dom$add_font_face$dyn","stylefy.impl.dom/add-font-face","stylefy$impl$dom$Dom$add_keyframes$dyn","stylefy.impl.dom/add-keyframes","stylefy$impl$dom$Dom$update_dom$dyn","stylefy.impl.dom/update-dom","stylefy$impl$dom$Dom$update_dom_if_needed$dyn","stylefy.impl.dom/update-dom-if-needed","stylefy$impl$dom$Dom$style_in_dom_QMARK_$dyn","stylefy.impl.dom/style-in-dom?","stylefy$impl$dom$Dom$style_by_hash$dyn","stylefy.impl.dom/style-by-hash","stylefy.impl.dom/Dom","this","options","style","class-as-css","tag-as-css","font-face-as-css","identifier","keyframes-as-css","style-hash"],"sourcesContent":["(ns stylefy.impl.dom\n  (:require [dommy.core :as dommy]\n            [garden.core :refer [css]]\n            [cljs.core.async :as async] ; Mandatory for running tests\n            [stylefy.impl.cache :as cache]\n            [stylefy.impl.log :as log]\n            [stylefy.impl.state :as state])\n  (:require-macros\n    [cljs.core.async.macros :refer [go]]))\n\n(def dom (atom nil))\n\n(def ^:private stylefy-node-id \"#_stylefy-styles_\")\n(def ^:private stylefy-constant-node-id \"#_stylefy-constant-styles_\")\n(def ^:private stylefy-base-node (atom nil)) ; Used when running multiple instances of stylefy on the same page\n(def stylefy-instance-id (atom nil)) ; Used when running multiple instances of stylefy on the same page\n\n(defprotocol Dom\n  ; Init\n  (init-cache [this options])\n  (init-multi-instance [this options])\n\n  ; Add styles\n  (save-style [this style])\n  (add-class [this class-as-css])\n  (add-tag [this tag-as-css])\n  (add-font-face [this font-face-as-css])\n  (add-keyframes [this identifier keyframes-as-css])\n\n  ; DOM management\n  (update-dom [this])\n  (update-dom-if-needed [this])\n  (style-in-dom? [this style-hash])\n  (style-by-hash [this style-hash]))"]}