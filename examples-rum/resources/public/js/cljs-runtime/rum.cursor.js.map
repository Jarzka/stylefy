{"version":3,"sources":["rum/cursor.cljs"],"mappings":"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","names":["this__4363__auto__","writer__4364__auto__","opt__4365__auto__","cljs.core/-write","rum.cursor/Cursor","rum.cursor/->Cursor","ref","path","meta","this","other","_","cljs.core.get_in","cljs.core/-deref","key","callback","cljs.core/add-watch","cljs.core/List","oldv","newv","old","new","cljs.core.not_EQ_","cljs.core/remove-watch","goog/getUid","cljs.core.swap_BANG_","cljs.core/assoc-in","f","G__27011","a","G__27018","G__27019","b","G__27024","G__27025","G__27026","rest","cljs.core.apply","writer","opts","cljs.core/pr-writer"],"sourcesContent":["(ns ^:no-doc rum.cursor)\n\n(deftype Cursor [ref path meta]\n  Object\n  (equiv [this other]\n    (-equiv this other))\n\n  IAtom\n\n  IMeta\n  (-meta [_] meta)\n\n  IEquiv\n  (-equiv [this other]\n    (identical? this other))\n\n  IDeref\n  (-deref [_]\n    (get-in (-deref ref) path))\n\n  IWatchable\n  (-add-watch [this key callback]\n    (add-watch ref (list this key)\n               (fn [_ _ oldv newv]\n                 (let [old (get-in oldv path)\n                       new (get-in newv path)]\n                   (when (not= old new)\n                     (callback key this old new)))))\n    this)\n\n  (-remove-watch [this key]\n    (remove-watch ref (list this key))\n    this)\n\n  IHash\n  (-hash [this] (goog/getUid this))\n\n  IReset\n  (-reset! [_ newv]\n    (swap! ref assoc-in path newv)\n    newv)\n\n  ISwap\n  (-swap! [this f]\n    (-reset! this (f (-deref this))))\n  (-swap! [this f a]\n    (-reset! this (f (-deref this) a)))\n  (-swap! [this f a b]\n    (-reset! this (f (-deref this) a b)))\n  (-swap! [this f a b rest]\n    (-reset! this (apply f (-deref this) a b rest)))\n\n  IPrintWithWriter\n  (-pr-writer [this writer opts]\n    (-write writer \"#object [rum.cursor.Cursor \")\n    (pr-writer {:val (-deref this)} writer opts)\n    (-write writer \"]\")))\n\n"]}